# 数据结构的游戏化实现

这是一个基于Unity的3D迷宫游戏项目，通过游戏化的方式展示和学习数据结构与算法，特别是迷宫生成和寻路算法。

## 主要功能

### 迷宫系统
- 使用四种算法生成随机迷宫：
  - DFS递归生成
  - Prim最小生成树
  - Kruskal并查集生成
  - 递归分割法
- 自动设置起点和终点
- 边界墙体特殊处理
- 支持迷宫重新生成

### 玩家系统
- 第一人称/俯视角自由切换
- WASD移动控制
- 鼠标视角控制
- 物理碰撞检测
- 玩家重置动画
- 随身光源效果
- 平滑相机跟随

### 算法演示
- 深度优先搜索(DFS)
  - 实时路径可视化
  - 回溯路径显示
  - 搜索效率优化
- 广度优先搜索(BFS)
  - 实时路径可视化
  - 最短路径查找
  - 平滑移动效果
  - 优化路径显示
- 路径颜色标记系统
  - 黄色：当前访问
  - 灰色：已访问
  - 绿色：最终路径
  - 蓝色：玩家路径

### UI系统
- 三栏式信息显示
  - 执行状态
  - 操作指南
  - 算法说明
- Tab键显示/隐藏界面
- 渐变动画效果
- 步数统计显示
- 退出确认面板

### 特效系统
- 起点终点粒子光环
- 地板发光效果
- 路径可视化效果
- 动态光照系统
- 材质动态切换
- 平滑过渡效果

## 操作说明

- `WASD` - 移动角色
- `鼠标左键` - 第一人称视角控制
- `鼠标右键` - 俯视角旋转
- `V键` - 切换第一人称/俯视角
- `1键` - 重新生成迷宫
- `2键` - 深度优先搜索演示
- `3键` - 广度优先搜索演示
- `R键` - 重置位置和路径
- `Tab键` - 显示/隐藏信息面板
- `L键` - 开关聚光灯
- `Alt键` - 显示/隐藏鼠标

## 开发环境

- Unity 2022.3.5f1
- Visual Studio 2022
- C# .NET Framework 4.7.1

## 项目结构

Assets/
├── Resources/           # 资源文件
│   ├── Materials/      # 材质文件
│   └── Prefabs/        # 预制体文件
└── Scripts/            # 脚本文件
    ├── Framework/      # 框架脚本
    └── Game/           # 游戏脚本
        ├── Algorithm/  # 算法实现
        ├── Maze/       # 迷宫系统
        ├── Player/     # 玩家系统
        ├── UI/         # UI系统
        └── Utils/      # 工具类

## 技术路线

### 框架设计
- 采用单例管理器模式，实现各系统间的解耦
- 使用事件中心统一管理消息传递
- 实现通用对象池，优化资源管理
- 封装异步资源加载系统

### 算法实现
- 使用深度优先搜索生成随机迷宫
- 实现DFS和BFS两种寻路算法
- 通过协程控制算法执行节奏
- 使用状态模式管理算法演示流程
- 优化算法执行效率和显示效果

### 交互设计
- 实现第一人称/俯视角无缝切换
- 基于物理系统的角色控制器
- 模块化的UI框架设计
- 动态的视觉反馈系统
- 优化的用户交互体验

## 难点解决方案

### 1. 迷宫生成和重建
- 问题：迷宫重新生成时出现内存泄漏和性能问题
- 解决方案：
  - 实现对象池管理预制体
  - 优化资源加载和卸载时机
  - 分帧处理迷宫生成过程

### 2. 算法可视化
- 问题：需要展示算法执行过程且保持流畅
- 解决方案：
  - 使用协程控制执行节奏
  - 实现分步执行机制
  - 通过颜色系统反馈状态

### 3. 视角切换系统
- 问题：切换视角时相机位置和旋转不平滑
- 解决方案：
  - 实现相机平滑插值
  - 基于玩家朝向计算俯视角
  - 优化相机跟随算法

### 4. UI交互优化
- 问题：UI信息展示与游戏交互存在冲突
- 解决方案：
  - 实现UI显示切换动画
  - 优化UI层级管理
  - 添加渐变过渡效果